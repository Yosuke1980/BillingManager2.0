{
  "matching_system": {
    "version": "1.0",
    "description": "ç…§åˆã‚·ã‚¹ãƒ†ãƒ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«",
    "main_matching": {
      "name": "ãƒ¡ã‚¤ãƒ³ç…§åˆæ©Ÿèƒ½",
      "method": "match_with_payments",
      "trigger": "ğŸ’° æ”¯æ‰•ã„ã¨ç…§åˆãƒœã‚¿ãƒ³",
      "description": "è²»ç”¨ç®¡ç†ã¨æ”¯æ‰•ã„æƒ…å ±ã®å…¨é …ç›®ã‚’ç…§åˆ"
    },
    "matching_conditions": {
      "priority_order": [
        {
          "priority": 1,
          "condition": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰å®Œå…¨ä¸€è‡´",
          "sql_condition": "payee_code = ?",
          "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹å®Œå…¨ä¸€è‡´æ¤œç´¢"
        },
        {
          "priority": 2,
          "condition": "é‡‘é¡ã®å®Œå…¨ä¸€è‡´",
          "sql_condition": "amount = ?",
          "description": "é‡‘é¡ã«ã‚ˆã‚‹å®Œå…¨ä¸€è‡´æ¤œç´¢"
        },
        {
          "priority": 3,
          "condition": "åŒä¸€æœˆãƒ•ã‚£ãƒ«ã‚¿",
          "sql_condition": "substr(payment_date, 1, 7) = ?",
          "example": "2025-04",
          "description": "æ”¯æ‰•æ—¥ã®å¹´æœˆã«ã‚ˆã‚‹çµã‚Šè¾¼ã¿"
        }
      ]
    },
    "judgment_results": [
      {
        "status": "æœªç€ãƒ»å‚¬ä¿ƒè¦",
        "icon": "âŒ",
        "condition": "æ”¯æ‰•ã„ãƒ‡ãƒ¼ã‚¿ãŒå…¨ãå­˜åœ¨ã—ãªã„",
        "color": "#f8d7da",
        "action": "å‚¬ä¿ƒãŒå¿…è¦"
      },
      {
        "status": "è¦ç¢ºèªãƒ»é‡‘é¡ç¢ºèªè¦",
        "icon": "âš¡",
        "condition": "æ”¯æ‰•ã„ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚‹ãŒé‡‘é¡ã«å·®ç•°",
        "color": "#fff3cd",
        "action": "é‡‘é¡ç¢ºèªãŒå¿…è¦"
      },
      {
        "status": "åˆ°ç€æ¸ˆã¿ãƒ»å¯¾å¿œä¸è¦",
        "icon": "âœ…",
        "condition": "é‡‘é¡ãŒå®Œå…¨ä¸€è‡´",
        "color": "#d4edda",
        "action": "å¯¾å¿œä¸è¦"
      }
    ],
    "database_structure": {
      "expense_db": {
        "name": "expenses.db",
        "date_format": "YYYY-MM-DD",
        "example": "2025-04-01",
        "description": "è²»ç”¨ç®¡ç†ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
      },
      "payment_db": {
        "name": "billing.db",
        "date_format": "YYYY/MM/DD",
        "example": "2025/04/01",
        "description": "æ”¯æ‰•ã„æƒ…å ±ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
      }
    },
    "matching_statistics": {
      "metrics": [
        {
          "name": "ä¸€è‡´ä»¶æ•°ã‚«ã‚¦ãƒ³ãƒˆ",
          "type": "å®Œå…¨ä¸€è‡´",
          "description": "é‡‘é¡ã¨æ”¯æ‰•ã„å…ˆãŒå®Œå…¨ã«ä¸€è‡´ã™ã‚‹ä»¶æ•°"
        },
        {
          "name": "å…¨ä½“ç…§åˆçŠ¶æ³",
          "type": "è‰²åˆ†ã‘ã«ã‚ˆã‚‹è¦–è¦šåŒ–",
          "colors": {
            "green": "#c8e6c9",
            "yellow": "#fff9c4",
            "red": "#f8d7da"
          }
        }
      ]
    },
    "matching_algorithm": {
      "steps": [
        {
          "step": 1,
          "action": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹æ¤œç´¢",
          "sql": "SELECT * FROM payments WHERE payee_code = ?"
        },
        {
          "step": 2,
          "action": "é‡‘é¡ã«ã‚ˆã‚‹å®Œå…¨ä¸€è‡´ç¢ºèª",
          "condition": "amount = target_amount"
        },
        {
          "step": 3,
          "action": "åŒä¸€æœˆã§ã®çµã‚Šè¾¼ã¿",
          "condition": "substr(payment_date, 1, 7) = target_month"
        },
        {
          "step": 4,
          "action": "çµæœåˆ¤å®šã¨è‰²åˆ†ã‘è¡¨ç¤º",
          "output": "è¦–è¦šçš„ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º"
        }
      ]
    },
    "configuration_notes": {
      "update_date": "2025-09-26",
      "maintainer": "BillingManager System",
      "usage": "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç…§åˆãƒ­ã‚¸ãƒƒã‚¯ã®è¨­å®šã‚’ç®¡ç†ã—ã¾ã™"
    }
  },
  "gas_environment": {
    "description": "Google Apps Scriptç’°å¢ƒè¨­å®š",
    "spreadsheet_config": {
      "master_spreadsheet_id": "",
      "spreadsheet_name": "ãƒ©ã‚¸ã‚ªå±€æ”¯æ‰•ã„ãƒ»è²»ç”¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ",
      "sheets": {
        "payments": "æ”¯æ‰•ã„æƒ…å ±",
        "expenses": "è²»ç”¨ç®¡ç†",
        "expense_master": "è²»ç”¨ãƒã‚¹ã‚¿ãƒ¼",
        "payee_master": "æ”¯æ‰•ã„å…ˆãƒã‚¹ã‚¿ãƒ¼",
        "project_filter": "æ¡ˆä»¶ç®¡ç†",
        "matching_log": "ç…§åˆãƒ­ã‚°",
        "settings": "ã‚·ã‚¹ãƒ†ãƒ è¨­å®š"
      },
      "sheet_colors": {
        "payments": "#e3f2fd",
        "expenses": "#f3e5f5",
        "expense_master": "#e8f5e8",
        "payee_master": "#fff3e0",
        "project_filter": "#fce4ec"
      }
    },
    "deployment": {
      "web_app_url": "",
      "version": "1.0",
      "triggers": {
        "onOpen": "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼è‡ªå‹•ä½œæˆ",
        "onChange": "ãƒ‡ãƒ¼ã‚¿å¤‰æ›´æ™‚ã®è‡ªå‹•å‡¦ç†",
        "timeDriven": "å®šæœŸå®Ÿè¡Œå‡¦ç†"
      },
      "permissions": [
        "https://www.googleapis.com/auth/spreadsheets",
        "https://www.googleapis.com/auth/drive",
        "https://www.googleapis.com/auth/script.external_request"
      ],
      "execution_settings": {
        "timeout_seconds": 300,
        "concurrent_executions": 1,
        "lock_service": true
      }
    },
    "google_drive": {
      "folder_structure": {
        "root_folder": "BillingManager_GAS",
        "csv_import_folder": "CSV_Import",
        "backup_folder": "Backups",
        "logs_folder": "Logs"
      },
      "file_naming": {
        "csv_pattern": "billing_*.csv",
        "backup_pattern": "backup_YYYYMMDD_HHMMSS",
        "log_pattern": "log_YYYYMMDD.txt"
      }
    }
  },
  "schemas": {
    "description": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆSQLiteâ†’Google Sheetså¤‰æ›ç”¨ï¼‰",
    "payments": {
      "sheet_name": "æ”¯æ‰•ã„æƒ…å ±",
      "columns": [
        {"name": "id", "type": "number", "auto_increment": true, "description": "IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰"},
        {"name": "subject", "type": "text", "max_length": 200, "description": "ä»¶å"},
        {"name": "project_name", "type": "text", "max_length": 100, "required": true, "description": "æ¡ˆä»¶å"},
        {"name": "payee", "type": "text", "max_length": 100, "required": true, "description": "æ”¯æ‰•ã„å…ˆ"},
        {"name": "payee_code", "type": "text", "pattern": "^[0-9]{4}$", "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰"},
        {"name": "amount", "type": "currency", "required": true, "description": "é‡‘é¡"},
        {"name": "payment_date", "type": "date", "format": "YYYY/MM/DD", "required": true, "description": "æ”¯æ‰•æ—¥"},
        {"name": "status", "type": "select", "options": ["æœªå‡¦ç†", "å‡¦ç†ä¸­", "ç…§åˆæ¸ˆ", "å®Œäº†"], "default": "æœªå‡¦ç†", "description": "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}
      ],
      "header_row": 1,
      "data_start_row": 2,
      "freeze_rows": 1,
      "freeze_columns": 3
    },
    "expenses": {
      "sheet_name": "è²»ç”¨ç®¡ç†",
      "columns": [
        {"name": "id", "type": "number", "auto_increment": true, "description": "IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰"},
        {"name": "project_name", "type": "text", "max_length": 100, "required": true, "description": "æ¡ˆä»¶å"},
        {"name": "payee", "type": "text", "max_length": 100, "required": true, "description": "æ”¯æ‰•ã„å…ˆ"},
        {"name": "payee_code", "type": "text", "pattern": "^[0-9]{4}$", "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰"},
        {"name": "amount", "type": "currency", "required": true, "description": "é‡‘é¡"},
        {"name": "payment_date", "type": "date", "format": "YYYY-MM-DD", "required": true, "description": "æ”¯æ‰•æ—¥"},
        {"name": "status", "type": "select", "options": ["æœªå‡¦ç†", "å‡¦ç†ä¸­", "ç…§åˆæ¸ˆ", "å®Œäº†"], "default": "æœªå‡¦ç†", "description": "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"},
        {"name": "source_type", "type": "select", "options": ["manual", "master", "csv_import"], "default": "manual", "description": "ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹"},
        {"name": "master_id", "type": "number", "description": "ãƒã‚¹ã‚¿ãƒ¼IDï¼ˆå‚ç…§ï¼‰"}
      ],
      "header_row": 1,
      "data_start_row": 2,
      "freeze_rows": 1,
      "freeze_columns": 3
    },
    "expense_master": {
      "sheet_name": "è²»ç”¨ãƒã‚¹ã‚¿ãƒ¼",
      "columns": [
        {"name": "id", "type": "number", "auto_increment": true, "description": "IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰"},
        {"name": "project_name", "type": "text", "max_length": 100, "required": true, "description": "æ¡ˆä»¶å"},
        {"name": "payee", "type": "text", "max_length": 100, "required": true, "description": "æ”¯æ‰•ã„å…ˆ"},
        {"name": "payee_code", "type": "text", "pattern": "^[0-9]{4}$", "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰"},
        {"name": "amount", "type": "currency", "required": true, "description": "åŸºæœ¬é‡‘é¡"},
        {"name": "payment_type", "type": "select", "options": ["æœˆé¡å›ºå®š", "å›æ•°ãƒ™ãƒ¼ã‚¹"], "default": "æœˆé¡å›ºå®š", "description": "æ”¯æ‰•ã„ç¨®åˆ¥"},
        {"name": "broadcast_days", "type": "text", "description": "æ”¾é€æ›œæ—¥ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰"},
        {"name": "start_date", "type": "date", "description": "é–‹å§‹æ—¥"},
        {"name": "end_date", "type": "date", "description": "çµ‚äº†æ—¥"},
        {"name": "status", "type": "select", "options": ["æœ‰åŠ¹", "ç„¡åŠ¹", "ä¸€æ™‚åœæ­¢"], "default": "æœ‰åŠ¹", "description": "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"}
      ],
      "header_row": 1,
      "data_start_row": 2,
      "freeze_rows": 1,
      "freeze_columns": 3
    },
    "payee_master": {
      "sheet_name": "æ”¯æ‰•ã„å…ˆãƒã‚¹ã‚¿ãƒ¼",
      "columns": [
        {"name": "id", "type": "number", "auto_increment": true, "description": "IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰"},
        {"name": "payee_name", "type": "text", "max_length": 100, "required": true, "unique": true, "description": "æ”¯æ‰•ã„å…ˆå"},
        {"name": "payee_code", "type": "text", "pattern": "^[0-9]{4}$", "required": true, "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰"},
        {"name": "created_date", "type": "datetime", "auto_value": "current_timestamp", "description": "ä½œæˆæ—¥æ™‚"},
        {"name": "updated_date", "type": "datetime", "auto_value": "current_timestamp", "description": "æ›´æ–°æ—¥æ™‚"}
      ],
      "header_row": 1,
      "data_start_row": 2,
      "freeze_rows": 1,
      "freeze_columns": 2
    }
  },
  "ui_config": {
    "description": "Google Sheets UIè¨­å®š",
    "menu_items": [
      {
        "name": "ğŸ”„ CSVèª­ã¿è¾¼ã¿",
        "function": "importCSV",
        "description": "CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿",
        "shortcut": "Ctrl+I"
      },
      {
        "name": "ğŸ’° æ”¯æ‰•ã„ã¨ç…§åˆ",
        "function": "runMatching",
        "description": "è²»ç”¨ç®¡ç†ã¨æ”¯æ‰•ã„æƒ…å ±ã®ç…§åˆå®Ÿè¡Œ",
        "shortcut": "Ctrl+M"
      },
      {
        "name": "ğŸ“Š ãƒã‚¹ã‚¿ãƒ¼ç”Ÿæˆ",
        "function": "generateMaster",
        "description": "æŒ‡å®šæœˆã®è²»ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ",
        "shortcut": "Ctrl+G"
      },
      {
        "name": "ğŸ“ˆ çµ±è¨ˆè¡¨ç¤º",
        "function": "showStatistics",
        "description": "ç…§åˆçµ±è¨ˆã®è¡¨ç¤º"
      },
      {
        "name": "ğŸ” ãƒ‡ãƒ¼ã‚¿æ¤œç´¢",
        "function": "searchData",
        "description": "ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿",
        "shortcut": "Ctrl+F"
      },
      {
        "name": "ğŸ’¾ CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
        "function": "exportCSV",
        "description": "ãƒ‡ãƒ¼ã‚¿ã‚’CSVå½¢å¼ã§å‡ºåŠ›",
        "shortcut": "Ctrl+E"
      },
      {
        "name": "ğŸ”§ è¨­å®š",
        "function": "showSettings",
        "description": "ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç”»é¢"
      }
    ],
    "conditional_formatting": {
      "status_colors": {
        "æœªå‡¦ç†": {"background": "#f8f9fa", "font": "#495057"},
        "å‡¦ç†ä¸­": {"background": "#fff3cd", "font": "#856404"},
        "ç…§åˆæ¸ˆ": {"background": "#d4edda", "font": "#155724"},
        "å®Œäº†": {"background": "#d1ecf1", "font": "#0c5460"}
      },
      "judgment_colors": {
        "æœªç€ãƒ»å‚¬ä¿ƒè¦": {"background": "#f8d7da", "font": "#721c24"},
        "è¦ç¢ºèªãƒ»é‡‘é¡ç¢ºèªè¦": {"background": "#fff3cd", "font": "#856404"},
        "åˆ°ç€æ¸ˆã¿ãƒ»å¯¾å¿œä¸è¦": {"background": "#d4edda", "font": "#155724"}
      },
      "urgency_colors": {
        "ä½": {"background": "#e2f3ff", "font": "#084298"},
        "é€šå¸¸": {"background": "#ffffff", "font": "#000000"},
        "é«˜": {"background": "#fff3cd", "font": "#856404"},
        "ç·Šæ€¥": {"background": "#f8d7da", "font": "#721c24"}
      }
    },
    "data_validation": {
      "status_options": ["æœªå‡¦ç†", "å‡¦ç†ä¸­", "ç…§åˆæ¸ˆ", "å®Œäº†"],
      "urgency_options": ["ä½", "é€šå¸¸", "é«˜", "ç·Šæ€¥"],
      "project_status_options": ["æº–å‚™ä¸­", "é€²è¡Œä¸­", "å®Œäº†", "ä¿ç•™"],
      "payment_type_options": ["æœˆé¡å›ºå®š", "å›æ•°ãƒ™ãƒ¼ã‚¹"],
      "weekdays": ["æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ", "æ—¥"]
    },
    "protected_ranges": {
      "payments": {
        "columns": ["A:A"],
        "description": "IDåˆ—ï¼ˆè‡ªå‹•æ¡ç•ªã®ãŸã‚ç·¨é›†ä¸å¯ï¼‰"
      },
      "expenses": {
        "columns": ["A:A"],
        "description": "IDåˆ—ï¼ˆè‡ªå‹•æ¡ç•ªã®ãŸã‚ç·¨é›†ä¸å¯ï¼‰"
      }
    },
    "chart_config": {
      "matching_statistics": {
        "type": "PIE",
        "title": "ç…§åˆçŠ¶æ³çµ±è¨ˆ",
        "position": {"row": 1, "column": 15}
      },
      "monthly_trend": {
        "type": "LINE",
        "title": "æœˆåˆ¥æ”¯æ‰•ã„æ¨ç§»",
        "position": {"row": 10, "column": 15}
      }
    }
  },
  "business_logic": {
    "description": "æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯è¨­å®š",
    "payee_code_format": {
      "length": 4,
      "padding": "zero",
      "validation_pattern": "^[0-9]{4}$",
      "example": "0001",
      "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ã®4æ¡0åŸ‹ã‚å‡¦ç†"
    },
    "amount_calculation": {
      "count_based": {
        "enabled": true,
        "weekdays": ["æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ", "æ—¥"],
        "use_previous_month": true,
        "calculation_method": "å‰æœˆå®Ÿç¸¾ãƒ™ãƒ¼ã‚¹",
        "description": "æ”¾é€æ›œæ—¥ã«åŸºã¥ãå›æ•°ãƒ™ãƒ¼ã‚¹é‡‘é¡è¨ˆç®—"
      },
      "currency_formatting": {
        "locale": "ja-JP",
        "currency": "JPY",
        "display": "Â¥1,234",
        "precision": 0
      }
    },
    "auto_completion": {
      "payee_suggestions": {
        "enabled": true,
        "source": "payee_master",
        "min_chars": 1,
        "max_suggestions": 10
      },
      "project_templates": {
        "enabled": true,
        "auto_fill_fields": ["client_name", "department", "approver"]
      }
    },
    "validation_rules": {
      "required_fields": {
        "payments": ["project_name", "payee", "amount", "payment_date"],
        "expenses": ["project_name", "payee", "amount", "payment_date"],
        "expense_master": ["project_name", "payee", "amount", "payment_type"]
      },
      "data_integrity": {
        "payee_code_uniqueness": true,
        "amount_positive": true,
        "date_format_check": true,
        "duplicate_prevention": {
          "enabled": true,
          "check_fields": ["project_name", "payee", "amount", "payment_date"]
        }
      }
    },
    "workflow": {
      "status_transitions": {
        "æœªå‡¦ç†": ["å‡¦ç†ä¸­", "ç…§åˆæ¸ˆ"],
        "å‡¦ç†ä¸­": ["ç…§åˆæ¸ˆ", "æœªå‡¦ç†"],
        "ç…§åˆæ¸ˆ": ["å®Œäº†"],
        "å®Œäº†": []
      },
      "approval_process": {
        "required_for_amounts_over": 100000,
        "approver_column": "approver",
        "notification_method": "email"
      }
    },
    "master_generation": {
      "schedule": {
        "enabled": true,
        "trigger": "monthly",
        "day_of_month": 25,
        "time": "09:00"
      },
      "default_values": {
        "payment_type": "æœˆé¡å›ºå®š",
        "status": "æœ‰åŠ¹",
        "urgency_level": "é€šå¸¸"
      }
    }
  },
  "function_mapping": {
    "description": "PyQt5ã‹ã‚‰GASã¸ã®é–¢æ•°ãƒãƒƒãƒ”ãƒ³ã‚°å®šç¾©",
    "database_operations": {
      "import_csv_data": {
        "gas_function": "importCSVToSheet",
        "parameters": ["csv_data", "header_mapping"],
        "return_type": "number",
        "description": "CSVãƒ‡ãƒ¼ã‚¿ã‚’Google Sheetsã«èª­ã¿è¾¼ã¿"
      },
      "get_payment_data": {
        "gas_function": "getPaymentData",
        "parameters": ["search_term"],
        "return_type": "array",
        "description": "æ”¯æ‰•ã„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"
      },
      "get_expense_data": {
        "gas_function": "getExpenseData",
        "parameters": ["search_term"],
        "return_type": "array",
        "description": "è²»ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"
      },
      "save_expense": {
        "gas_function": "saveExpenseData",
        "parameters": ["data", "is_new"],
        "return_type": "number",
        "description": "è²»ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜"
      },
      "delete_expense": {
        "gas_function": "deleteExpenseData",
        "parameters": ["expense_id"],
        "return_type": "boolean",
        "description": "è²»ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤"
      },
      "match_expenses_with_payments": {
        "gas_function": "matchExpensesWithPayments",
        "parameters": [],
        "return_type": "object",
        "description": "è²»ç”¨ã¨æ”¯æ‰•ã„ã®ç…§åˆå®Ÿè¡Œ"
      },
      "generate_expenses_from_master": {
        "gas_function": "generateExpensesFromMaster",
        "parameters": ["target_year", "target_month"],
        "return_type": "object",
        "description": "ãƒã‚¹ã‚¿ãƒ¼ã‹ã‚‰è²»ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ"
      }
    },
    "utility_functions": {
      "format_payee_code": {
        "gas_function": "formatPayeeCode",
        "parameters": ["code", "length"],
        "return_type": "string",
        "description": "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰ã®0åŸ‹ã‚å‡¦ç†",
        "pyqt_path": "utils.format_payee_code"
      },
      "calculate_count_based_amount": {
        "gas_function": "calculateCountBasedAmount",
        "parameters": ["base_amount", "broadcast_days", "target_year", "target_month", "use_previous_month"],
        "return_type": "object",
        "description": "å›æ•°ãƒ™ãƒ¼ã‚¹é‡‘é¡è¨ˆç®—",
        "pyqt_path": "utils.calculate_count_based_amount"
      },
      "format_amount": {
        "gas_function": "formatAmount",
        "parameters": ["amount"],
        "return_type": "string",
        "description": "é‡‘é¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ",
        "pyqt_path": "utils.format_amount"
      },
      "log_message": {
        "gas_function": "logMessage",
        "parameters": ["message"],
        "return_type": "void",
        "description": "ãƒ­ã‚°å‡ºåŠ›ï¼ˆSheetsã«è¨˜éŒ²ï¼‰",
        "pyqt_path": "utils.log_message"
      },
      "validate_date_string": {
        "gas_function": "validateDateString",
        "parameters": ["date_str"],
        "return_type": "boolean",
        "description": "æ—¥ä»˜æ–‡å­—åˆ—ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯",
        "pyqt_path": "utils.validate_date_string"
      }
    },
    "ui_operations": {
      "show_payment_comparison_all": {
        "gas_function": "showPaymentComparisonDialog",
        "parameters": ["expense_data"],
        "return_type": "void",
        "description": "æ”¯æ‰•ã„ç…§åˆçµæœã®è¡¨ç¤º",
        "implementation": "sidebar_html"
      },
      "refresh_data": {
        "gas_function": "refreshSheetData",
        "parameters": ["sheet_name"],
        "return_type": "void",
        "description": "ã‚·ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®å†èª­ã¿è¾¼ã¿"
      },
      "export_csv": {
        "gas_function": "exportSheetToCSV",
        "parameters": ["sheet_name", "file_name"],
        "return_type": "void",
        "description": "CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½"
      },
      "show_search": {
        "gas_function": "showSearchDialog",
        "parameters": [],
        "return_type": "void",
        "description": "æ¤œç´¢ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º",
        "implementation": "html_service"
      }
    },
    "matching_logic": {
      "get_matching_logic": {
        "gas_function": "getMatchingLogic",
        "parameters": [],
        "return_type": "object",
        "description": "ç…§åˆãƒ­ã‚¸ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—",
        "pyqt_path": "matching_utils.get_matching_logic"
      },
      "build_matching_query": {
        "gas_function": "buildMatchingQuery",
        "parameters": ["payee_code", "payee", "amount", "payment_month"],
        "return_type": "object",
        "description": "ç…§åˆç”¨ã‚¯ã‚¨ãƒªæ§‹ç¯‰",
        "pyqt_path": "matching_utils.MatchingLogic.build_matching_query"
      }
    }
  },
  "csv_config": {
    "description": "CSVèª­ã¿è¾¼ã¿ãƒ»å‡ºåŠ›è¨­å®š",
    "import_settings": {
      "encoding": "shift_jis",
      "delimiter": ",",
      "quote_character": "\"",
      "escape_character": "\\",
      "header_row": 1,
      "data_start_row": 2,
      "skip_empty_lines": true,
      "trim_whitespace": true,
      "max_rows": 10000,
      "error_handling": {
        "invalid_data": "skip_row",
        "missing_columns": "fill_empty",
        "encoding_error": "replace_character"
      }
    },
    "header_mapping": {
      "description": "CSVãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒƒãƒ”ãƒ³ã‚°",
      "payments": {
        "ãŠã‚‚ã¦æƒ…å ±.ä»¶å": "subject",
        "æ˜ç´°æƒ…å ±.æ˜ç´°é …ç›®": "project_name",
        "ãŠã‚‚ã¦æƒ…å ±.è«‹æ±‚å…ƒ": "payee",
        "ãŠã‚‚ã¦æƒ…å ±.æ”¯æ‰•å…ˆã‚³ãƒ¼ãƒ‰": "payee_code",
        "æ˜ç´°æƒ…å ±.é‡‘é¡": "amount",
        "ãŠã‚‚ã¦æƒ…å ±.è‡ªç¤¾æ”¯æ‰•æœŸé™": "payment_date",
        "çŠ¶æ…‹": "status"
      },
      "expenses": {
        "æ¡ˆä»¶å": "project_name",
        "æ”¯æ‰•ã„å…ˆ": "payee",
        "æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰": "payee_code",
        "é‡‘é¡": "amount",
        "æ”¯æ‰•æ—¥": "payment_date",
        "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹": "status"
      },
      "flexible_matching": {
        "enabled": true,
        "case_sensitive": false,
        "partial_match": true,
        "alternative_headers": {
          "project_name": ["æ¡ˆä»¶å", "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå", "æ˜ç´°é …ç›®", "ä»¶å"],
          "payee": ["æ”¯æ‰•ã„å…ˆ", "è«‹æ±‚å…ƒ", "æ”¯æ‰•å…ˆ", "æ¥­è€…å"],
          "payee_code": ["æ”¯æ‰•ã„å…ˆã‚³ãƒ¼ãƒ‰", "æ”¯æ‰•å…ˆã‚³ãƒ¼ãƒ‰", "æ¥­è€…ã‚³ãƒ¼ãƒ‰", "ã‚³ãƒ¼ãƒ‰"],
          "amount": ["é‡‘é¡", "æ”¯æ‰•é‡‘é¡", "è«‹æ±‚é‡‘é¡", "è²»ç”¨"],
          "payment_date": ["æ”¯æ‰•æ—¥", "æ”¯æ‰•æœŸé™", "è‡ªç¤¾æ”¯æ‰•æœŸé™", "æ±ºæ¸ˆæ—¥"]
        }
      }
    },
    "export_settings": {
      "encoding": "utf-8",
      "delimiter": ",",
      "quote_character": "\"",
      "include_header": true,
      "date_format": "YYYY-MM-DD",
      "currency_format": "number_only",
      "null_value_handling": "empty_string",
      "file_naming": {
        "prefix": "billing_export_",
        "timestamp_format": "YYYYMMDD_HHMMSS",
        "extension": ".csv"
      }
    },
    "validation": {
      "required_columns": {
        "payments": ["project_name", "payee", "amount", "payment_date"],
        "expenses": ["project_name", "payee", "amount", "payment_date"]
      },
      "data_types": {
        "amount": "number",
        "payment_date": "date",
        "payee_code": "text"
      },
      "constraints": {
        "amount_min": 0,
        "amount_max": 100000000,
        "payee_code_pattern": "^[0-9]{4}$",
        "date_range": {
          "min": "2020-01-01",
          "max": "2030-12-31"
        }
      }
    },
    "google_drive_integration": {
      "enabled": true,
      "import_folder": "CSV_Import",
      "export_folder": "CSV_Export",
      "auto_detection": {
        "enabled": true,
        "file_pattern": "billing_*.csv",
        "check_interval": "hourly"
      },
      "permissions": {
        "import_folder": "view_only",
        "export_folder": "edit"
      }
    }
  }
}